1
00:00:06,160 --> 00:00:25,789
Самый простой способ получить информацию об использовании
 команды -- это вызвать её с параметром -h 

2
00:00:25,789 --> 00:00:31,240
или --help для длинных параметров GNU.

3
00:00:31,240 --> 00:00:40,870
Ну и с самого момента своего создания UNIX
 поставлялся с большим набором документации.

4
00:00:40,870 --> 00:00:44,200
Некоторая часть информации обычно находится

5
00:00:44,200 --> 00:01:10,720
в каталогах /usr/doc или /usr/local/doc в виде текстовых файлов.

6
00:01:10,720 --> 00:01:21,880
Но краеугольным камнем справочной системы Unix является команда man.

7
00:01:21,880 --> 00:01:34,110
И «man» в данном случае не имеет отношения к полу -- это просто сокращение от «manual».

8
00:01:34,110 --> 00:01:46,780
Посмотрим же на руководство по этому «мануалу».

9
00:01:46,780 --> 00:01:52,190
Команда `man` была традиционной для

10
00:01:52,190 --> 00:02:00,940
UNIX с момента его создания. Она была разработана
 в эпоху телетайпа и до сих пор отлично работает

11
00:02:00,940 --> 00:02:03,460
 на всех типах оборудования.

12
00:02:03,460 --> 00:02:18,170
И в синтаксисе вызова команды `man` мы видим два мира, две системы UNIX:

13
00:02:18,170 --> 00:02:23,510
BSD и SYSV.

14
00:02:23,510 --> 00:02:28,250
И первым делом мы можем увидеть разный синтаксис команд.

15
00:02:32,180 --> 00:02:37,540
Части справочной страницы более или менее одинаковы:

16
00:02:37,540 --> 00:02:47,640
NAME (ИМЯ), SYNOPSIS (СИНТАКСИС), DESCRIPTIONS (ОПИСАНИЕ), FILE(ФАЙЛ), SEE ALSO (СМОТРИ ТАКЖЕ), DIAGNOSTIC (ДИАГНОСТИКА), BUGS (ОШИБКИ).

17
00:02:47,640 --> 00:02:55,700
Параметр '-s' с некоторым целочисленным параметром
 команды `man` в варианте SYSV обозначает

18
00:02:55,700 --> 00:03:10,060
раздел реальных бумажных руководств,
 которые раньше поставлялись с ОС разработчиком.

19
00:03:10,060 --> 00:03:18,980
Для GNU/BSD систем используется только номер раздела.

20
00:03:18,980 --> 00:03:30,960
Номера разделов также разные, как вы можете заметить здесь.

21
00:03:30,960 --> 00:03:35,740
Первые разделы в обоих -- это просто пользовательские команды.

22
00:03:35,740 --> 00:03:40,000
Второй -- системные вызовы.

23
00:03:40,000 --> 00:03:45,000
Третий -- функции C-библиотек.

24
00:03:45,000 --> 00:03:46,611
И далее мы можем увидеть разную нумерацию для разных вариантов систем.

25
00:03:58,940 --> 00:04:12,410
Давайте посмотрим, например, на страницу руководства
 по хорошо известной функции языка Си `printf`.

26
00:04:15,400 --> 00:04:17,459
Но

27
00:04:17,459 --> 00:04:19,739
$ man printf

28
00:04:19,739 --> 00:04:27,010
показывает нам страницу` man` для команды оболочки, а не функции C.

29
00:04:27,010 --> 00:04:33,780
Чтобы увидеть руководство по функции printf на языке Си, мы должны запустить:

30
00:04:33,780 --> 00:04:36,069
$ man 3 printf

31
00:04:36,069 --> 00:04:40,970
Чтобы просмотреть список страниц руководства, связанных с printf,

32
00:04:40,970 --> 00:05:00,730
мы должны выполнить:
 * `whatis printf` -- поиск в базе данных `whatis`

33
00:05:00,730 --> 00:05:08,229
(созданная утилитой `makewhatis`) для полных слов

34
00:05:08,229 --> 00:05:36,240
* и `man -k` или` apropos printf` -- поиск в базе данных `whatis`
 строк, связанных с "printf".

35
00:05:36,240 --> 00:05:43,090
Базы данных должны создаваться программой `makewhatis`,
 которая обычно запускается ночью

36
00:05:43,090 --> 00:05:45,100
службой `cron`.

37
00:05:45,100 --> 00:05:54,240
Если у вас только что установленная система, и вы хотите
 выполнить любую команду, связанную с базой данных `whatis`

38
00:05:54,240 --> 00:06:00,410
вам, возможно, потребуется запустить программу `makewhatis` вручную.

39
00:06:00,410 --> 00:06:08,639
OK -- давайте посмотрим на настоящую страницу

40
00:06:08,639 --> 00:06:18,650
руководства :
$ zless /usr/share/man/man1/man.1.gz

41
00:06:18,650 --> 00:06:30,550
Это формат `troff`.

42
00:06:30,550 --> 00:06:39,360
Troff (сокращение от «setsetter roff») и nroff (обновлённый «roff») -- это реализация программы

43
00:06:39,360 --> 00:06:51,490
форматирования текста в традиционном для систем UNIX стиле -- с использованием обычного текстового файла с некоторой разметкой.

44
00:06:51,490 --> 00:07:01,220
Идеологически он основан на программе RUNOFF MIT,
 разработанной в 1964 году, и после серии

45
00:07:01,220 --> 00:07:12,350
утрат и переписываний исходного кода C-реализация
 была повторно реализована в 1975 году.

46
00:07:12,350 --> 00:07:21,600
Под названием Troff она была принята
 для использования в UNIX и, конечно же,

47
00:07:21,600 --> 00:07:22,810
в патентном отделе AT&T.

48
00:07:25,240 --> 00:07:34,660
Основным преимуществом этой системы была переносимость
 и возможность создавать печатное представление

49
00:07:34,660 --> 00:07:43,780
 для различных устройств, от обычного ASCII-принтера
 до высококачественных типографских фотонаборных устройств.

50
00:07:43,780 --> 00:07:50,990
Появление новых технологий, таких как принтеры PostScript,
 просто добавляет соответствующие

51
00:07:50,990 --> 00:07:56,760
драйверы вывода для средства визуализации разметки.

52
00:07:56,760 --> 00:08:18,270
По сравнению с более известными в настоящее время
 системами WYSIWYG («Что видишь, то и получаешь») такие системы

53
00:08:18,270 --> 00:08:26,890
имеют лучшую переносимость между платформами
 и более высокое качество набора текста.

54
00:08:26,890 --> 00:08:35,229
Более того, такие системы больше ориентированы
 на программное создание печатных документов

55
00:08:35,229 --> 00:08:40,709
без вмешательства человека.

56
00:08:40,709 --> 00:08:49,279
Давайте посмотрим на пример ручного рендеринга
 страницы руководства, которая была скрыта под

57
00:08:49,279 --> 00:08:50,850
капотом команды `man`:

58
00:08:50,850 --> 00:08:53,480
$ zcat /usr/share/man/man1/man.1.gz | таблица \ | eqn -Tascii | nroff -man | less

59
00:08:54,480 --> 00:09:06,660
Это просто программный конвейер, в котором мы
 распаковываем сжатый TROFF-исходник, проходим через

60
00:09:06,660 --> 00:09:17,639
препроцессор TROFF для таблиц и математических уравнений,
 передаем в терминальный вариант troff с именем 'nroff'

61
00:09:17,639 --> 00:09:31,790
и, наконец, мы можем передать текст
 для пейджера/программы просмотра с именем "less".

62
00:09:31,790 --> 00:09:32,939
Что это за программа просмотра?

63
00:09:32,939 --> 00:09:41,880
В TTY-интерфейсе команда `man` смотрится весьма недурно --
 когда вы запускаете ее, вы получаете

64
00:09:41,880 --> 00:09:50,450
бумажные руководства, которые можно подшить в книгу,
 положить на полку и при необходимости перелистать.

65
00:09:50,450 --> 00:09:59,209
На полноэкранном терминале в прежние времена
 Ctrl-S(стоп)/Ctrl-Q(продолжение) было достаточно для просмотра,

66
00:09:59,209 --> 00:10:16,190
потому что в те времена терминалы подключались
 на низкой скорости (9600 бит в секунду например),

67
00:10:16,190 --> 00:10:27,860
а нынче для того чтобы что-то просмотреть,
 используют специальные программы -- viewers.

68
00:10:27,860 --> 00:10:35,160
И на самом деле, когда вы запускаете команду `man`,
 вы видите просто интерфейс программы просмотра,

69
00:10:35,160 --> 00:10:39,730
в большинстве случаев это` less`.

70
00:10:39,730 --> 00:10:48,630
Мы обсудим средства просмотра далее, но в двух словах,
 наиболее часто используемая из них

71
00:10:48,630 --> 00:11:11,089
«less» понимает стандартные клавиши PgUp/PgDown,
 Up/Down, а выход из программы

72
00:11:11,089 --> 00:11:20,459
с помощью клавиши «q» означает "quit" (выход).

73
00:11:20,459 --> 00:11:22,040
Ну что ж...

74
00:11:22,040 --> 00:11:30,630
Выглядит прекрасно, но представление документации в man-стиле имеет определенные ограничения:

75
00:11:30,630 --> 00:11:39,099
это всего лишь текстовое представление
 без каких-либо полезных функций, изобретенных позже.

76
00:11:39,099 --> 00:11:46,259
Например, в этом случае невозможно использование гипертекстовых ссылок.

77
00:11:46,259 --> 00:11:57,540
Чтобы решить эту проблему, проект GNU создал
 информационную систему, которая также работает на всех

78
00:11:57,540 --> 00:12:12,410
типах алфавитно-цифровых терминалов,
 но с поддержкой гипертекста -- система `info`.

79
00:12:12,410 --> 00:12:20,470
Для многих утилит GNU соответствующие
 файлы справки имеют формат info,

80
00:12:20,470 --> 00:12:25,829
а на страницах man рекомендуется обращаться к info.

81
00:12:25,829 --> 00:12:38,440
У `Info` есть свой собственный пользовательский интерфейс,
 и лучший способ его изучить --

82
00:12:38,440 --> 00:12:44,179
просто запустить команду` info info`.

83
00:12:44,179 --> 00:12:54,639
Внутренний источник «info» -- это файлы текстовой разметки в формате texinfo.

84
00:12:54,639 --> 00:13:03,920
Из таких файлов создаются текстовые файлы
 для просмотра на терминалах,

85
00:13:03,920 --> 00:13:11,399
а также документация, создаваемая системой набора TeX для печати.

86
00:13:11,399 --> 00:13:25,399
TeX -- еще одна система набора (или «система форматирования»),
 которая была разработана и в основном написана

87
00:13:25,399 --> 00:13:30,350
в 1978 году Дональдом Кнутом.

88
00:13:30,350 --> 00:13:49,829
TeX и его расширение LaTex очень популярны
 в научном мире как средство набора

89
00:13:49,829 --> 00:13:53,019
сложных математических формул.

90
00:13:53,019 --> 00:13:54,089
ОК.

91
00:13:54,089 --> 00:14:04,089
Но невозможность использования графических иллюстраций
 и какого-либо мультимедийного контекста

92
00:14:04,089 --> 00:14:06,399
 оставалась актуальной.

93
00:14:06,399 --> 00:14:13,750
И в прошлом почти каждый производитель коммерческого  UNIX
 создавал свою собственную справочную систему,

94
00:14:13,750 --> 00:14:22,060
которая, например, включала как поддержку гипертекста,
 так и графику, и работала

95
00:14:22,060 --> 00:14:24,389
с графической системой X Window.

96
00:14:24,389 --> 00:14:36,660
Но теперь, с появлением HTML (еще одного языка разметки текста),
 такая справочная информация

97
00:14:36,660 --> 00:14:46,600
стала предоставляться в этом формате
 непосредственно в системе или на серверах WWW.

98
00:14:46,600 --> 00:14:59,949
Часто эти HTML-страницы или готовые к печати версии PDF
 просто генерируются из некоторой

99
00:14:59,949 --> 00:15:15,769
разметки, ориентированной на контент, такой как DocBook XML.

