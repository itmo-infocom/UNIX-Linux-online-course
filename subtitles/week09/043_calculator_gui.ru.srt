1
00:00:05,420 --> 00:00:08,830
Итак.

2
00:00:08,830 --> 00:00:13,759
Вернемся к пятому примеру:

3
00:00:13,759 --> 00:00:22,750
$ git checkout Example_5

4
00:00:38,470 --> 00:00:42,970
$ git diff d6453c0c41548a55e3249ea8c3b788c71cb76f7 Example_5 | less

5
00:00:45,210 --> 00:00:55,879
Смотрится длинновато, но давайте приглядимся внимательнее --

6
00:00:55,879 --> 00:01:09,520
на самом деле добавлен только файл gdialog:

7
00:01:09,520 --> 00:01:12,950
И это не наша разработка -- это просто GTK+

8
00:01:12,950 --> 00:01:19,110
графический аналог текстовой программы `dialog`.

9
00:01:19,110 --> 00:01:34,889
Наши изменения просто добавляют команду установки
 для `gdialog`, если она еще не установлена:

10
00:01:34,889 --> 00:01:40,880
$ cat Makefile

11
00:01:40,880 --> 00:01:55,450
и меняют четыре строки в` calc_ui`:

12
00:01:55,450 --> 00:02:14,469
$ cat calc_ui

13
00:02:14,469 --> 00:02:24,909
первым делом мы проверяем наличие программы `gdialog` в нашей системе.

14
00:02:24,909 --> 00:02:33,969
Затем мы устанавливаем переменную среды DIALOG как `gdialog`,

15
00:02:33,969 --> 00:02:39,780
если она ещё не установлена, в `dialog`.

16
00:02:39,780 --> 00:02:48,810
А потом мы просто заменяем все места,
 где используется `dialog`, на переменную

17
00:02:48,810 --> 00:02:50,780
окружения DIALOG.

18
00:02:50,780 --> 00:02:52,160
OK.

19
00:02:52,160 --> 00:02:55,750
Устанавливаем новую версию:

20
00:02:55,750 --> 00:03:09,599
$ sudo make install

21
00:03:14,000 --> 00:03:20,000
и снова запускаем наш скрипт:

22
00:03:20,000 --> 00:03:43,219
$ calc_ui

23
00:03:43,219 --> 00:03:47,180
Работает!

24
00:03:47,180 --> 00:03:58,120
Но помните, единственное, что используется для связи
 между сервером XWindow и клиентом --

25
00:03:58,120 --> 00:04:02,959
это переменная среды DISPLAY:

26
00:04:02,959 --> 00:04:09,640
$ echo $DISPLAY
: 0

27
00:04:09,640 --> 00:04:19,840
Давайте отключим ее и попробуем снова запустить
 наш пользовательский интерфейс:

28
00:04:19,840 --> 00:04:29,580
$ unset DISPLAY
$ calc_ui

29
00:04:29,580 --> 00:04:35,960
Тадаам -- мы снова получили текстовый интерфейс!

30
00:04:35,960 --> 00:04:45,460
Просто потому, что скрипт `gdialog` автоматически
 переключается на текстовый `dialog`, если мы работаем

31
00:04:45,460 --> 00:04:48,460
в текстовом режиме.

32
00:04:48,460 --> 00:05:11,319
Теперь просто переустанавливаем DISPLAY,

33
00:05:11,319 --> 00:05:18,739
и мы снова получим графический интерфейс:

34
00:05:18,739 --> 00:05:25,840
$ export DISPLAY=:0
$ calc_ui

