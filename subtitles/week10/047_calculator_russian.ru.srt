1
00:00:05,000 --> 00:00:07,080
$ git checkout Example_9
Ok.

2
00:00:07,080 --> 00:00:13,629
Удалим этот файл -- в следующем примере он у нас уже есть:

3
00:00:13,629 --> 00:00:15,280
$ rm calc_ui.pot

4
00:00:15,280 --> 00:00:35,880
$ git checkout Example_9

5
00:00:35,890 --> 00:00:43,170
Как мы видим, мы только что сделали перевод

6
00:00:43,170 --> 00:00:53,739
на русский язык соответствующего PO-файла
 и добавили шаги установки в Makefile.

7
00:00:53,739 --> 00:01:03,719
Давайте посмотрим на PO-файл с русским переводом:

8
00:01:03,719 --> 00:01:14,479
$ cat calc_ui-ru.po

9
00:01:14,479 --> 00:01:30,730
Сначала у нас есть метаданные,
 а затем пары строк перевода: `msgid` с источником

10
00:01:30,730 --> 00:01:34,869
и` msgstr` с переводом.

11
00:01:34,869 --> 00:01:42,759
Это не лучшая стратегия перевода,
 потому что некоторые сообщения на одном языке

12
00:01:42,759 --> 00:01:50,340
могут иметь разные значения на других языках в различных контекстах.

13
00:01:50,340 --> 00:02:02,880
А в более крупных программных проектах, таких как Firefox
 или Open/LibreOffice, используются другие механизмы локализации,

14
00:02:02,880 --> 00:02:12,320
в которых каждая строка пользовательского интерфейса
 имеет свой собственный уникальный идентификатор

15
00:02:12,320 --> 00:02:15,769
и перевод делается для каждой из них.

16
00:02:15,769 --> 00:02:24,420
А для упрощения и унификации процесса перевода
 они используют специальные инструменты, к примеру,

17
00:02:24,420 --> 00:02:29,610
такие как специализированные редакторы
 с поддержкой механизма translation memory.

18
00:02:29,610 --> 00:02:40,440
Но `gettext` широко используется в UNIX-подобном мире,
 и его достаточно для наших целей.

19
00:02:40,440 --> 00:02:44,439
Теперь скомпилируем и установим наш перевод:

20
00:02:44,439 --> 00:02:46,660
$ sudo make install

21
00:02:53,240 --> 00:03:07,340
Как мы видим, мы компилируем наш файл перевода

22
00:03:07,340 --> 00:03:21,780
`calc_ui-ru.po` в `calc_ui-ru.mo` и устанавливаем
 полученный таким образом бинарный файл локализации

23
00:03:21,780 --> 00:03:28,579
в каталог локали LC_MESSAGES.

24
00:03:28,579 --> 00:03:34,899
Проверим результат:

25
00:03:34,899 --> 00:03:45,810
$ LANG=ru_RU.UTF-8 calc_ui

26
00:03:45,810 --> 00:03:51,270
Отлично!

27
00:03:51,270 --> 00:03:54,250
Теперь у нас есть калькулятор на русском языке!

28
00:03:54,250 --> 00:04:03,160
Снова переключимся на английский:

29
00:04:03,160 --> 00:04:21,360
$ LANG=en_US.UTF-8 calc_ui

30
00:04:21,360 --> 00:04:29,040
Работает.

31
00:04:29,040 --> 00:04:49,030
Для других языков у нас по-прежнему тот же интерфейс,

32
00:04:49,030 --> 00:04:55,030
потому что мы не переводили для них сообщения:

33
00:04:55,030 --> 00:04:56,210
$ LANG=zh_CN.UTF-8 calc_ui

34
00:04:56,210 --> 00:05:01,650
И может быть сейчас самое время перевести наше

35
00:05:01,650 --> 00:05:05,600
приложение на ваш любимый язык...

